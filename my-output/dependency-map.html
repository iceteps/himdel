<!DOCTYPE html>
<html>
<head>
  <title>Himdell Dependency Map</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Use CDN links instead of local files -->
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js">
    // Setup the tabs
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => {
        // Remove active class from all tabs
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        
        // Add active class to clicked tab
        tab.classList.add('active');
        const tabId = tab.getAttribute('data-tab');
        document.getElementById(tabId + '-tab').classList.add('active');
      });
    });
    
    // Initialize the text-flow display
    const textFlowContainer = document.getElementById('text-flow');
    textFlowContainer.textContent = `flowchart LR
  %% Style definitions
  classDef component fill:#e1f5fe,stroke:#0288d1,color:#01579b
  classDef context fill:#fff9c4,stroke:#fbc02d,color:#f57f17
  classDef object fill:#e8f5e9,stroke:#43a047,color:#1b5e20
  classDef array fill:#f3e5f5,stroke:#8e24aa,color:#4a148c
  classDef map fill:#ffebee,stroke:#e53935,color:#b71c1c
  classDef multiConsumer fill:#ede7f6,stroke:#673ab7,color:#311b92,stroke-width:3px

  subgraph Components
  authcontext["Component: " + "["AuthContext"]:::component
  cartcontext["Component: " + "["CartContext"]:::component
  datacontext["Component: " + "["DataContext"]:::component
  dealscontext["Component: " + "["DealsContext"]:::component
  backgroundfetcher["Component: " + "["BackgroundFetcher"]:::component
  browseviewwrapper["Component: " + "["BrowseViewWrapper"]:::component
  categoryselectionmain["Component: " + "["CategorySelectionMain"]:::component
  conditionalhero["Component: " + "["ConditionalHero"]:::component
  header["Component: " + "["Header"]:::component
  headersearch["Component: " + "["HeaderSearch"]:::component
  hero["Component: " + "["Hero"]:::component
  productbadges["Component: " + "["ProductBadges"]:::component
  productbreadcrumb["Component: " + "["ProductBreadcrumb"]:::component
  productcard["Component: " + "["ProductCard"]:::component
  productpagecontent["Component: " + "["ProductPageContent"]:::component
  productquickview["Component: " + "["ProductQuickView"]:::component
  productslistmain["Component: " + "["ProductsListMain"]:::component
  saleribbon["Component: " + "["SaleRibbon"]:::component
  shoppingcart["Component: " + "["ShoppingCart"]:::component
  singleproductview["Component: " + "["SingleProductView"]:::component
  userdashboard["Component: " + "["UserDashboard"]:::component
  layout["Component: " + "["layout"]:::component
  not_found["Component: " + "["not-found"]:::component
  page["Component: " + "["page"]:::component
  providers["Component: " + "["providers"]:::component
  orderhistory["Component: " + "["OrderHistory"]:::component
  personalinfo["Component: " + "["PersonalInfo"]:::component
  authbutton["Component: " + "["AuthButton"]:::component
  userauthmodal["Component: " + "["UserAuthModal"]:::component
  confirmationmodal["Component: " + "["ConfirmationModal"]:::component
  emptycartnotification["Component: " + "["EmptyCartNotification"]:::component
  helpmodal["Component: " + "["HelpModal"]:::component
  menu["Component: " + "["Menu"]:::component
  productsearchmanager["Component: " + "["ProductSearchManager"]:::component
  searchresults["Component: " + "["SearchResults"]:::component
  sharemodal["Component: " + "["ShareModal"]:::component
  shineeffect["Component: " + "["ShineEffect"]:::component
  swipetoaction["Component: " + "["SwipeToAction"]:::component
  notemodal["Component: " + "["noteModal"]:::component
  browseviewmain["Component: " + "["BrowseViewMain"]:::component
  categorynavigationbar["Component: " + "["CategoryNavigationBar"]:::component
  productcardwrapper["Component: " + "["ProductCardWrapper"]:::component
  productsection["Component: " + "["ProductSection"]:::component
  dealsdebugpanel["Component: " + "["DealsDebugPanel"]:::component
  checkout["Component: " + "["Checkout"]:::component
  checkoutmodal["Component: " + "["CheckoutModal"]:::component
  addressmodal["Component: " + "["AddressModal"]:::component
  cartbutton["Component: " + "["CartButton"]:::component
  cartcheck["Component: " + "["CartCheck"]:::component
  cartstatepersistencehandler["Component: " + "["CartStatePersistenceHandler"]:::component
  devtools["Component: " + "["DevTools"]:::component
  end

  subgraph Contexts
  unnamedcontext["["Context: UnnamedContext
(0 consumers)"]:::context
  end

  subgraph MultiConsumedProps
  prop_error["["Prop: Error
(2 consumers)"]:::multiConsumer
  prop_image["["Prop: Image
(13 consumers)"]:::multiConsumer
  prop_conditionalhero["["Prop: ConditionalHero
(2 consumers)"]:::multiConsumer
  prop_hero["["Prop: Hero
(2 consumers)"]:::multiConsumer
  prop_chevronleft["["Prop: ChevronLeft
(3 consumers)"]:::multiConsumer
  prop_productsearchmanager["["Prop: ProductSearchManager
(2 consumers)"]:::multiConsumer
  prop_menu["["Prop: Menu
(2 consumers)"]:::multiConsumer
  prop_link["["Prop: Link
(7 consumers)"]:::multiConsumer
  prop_saleribbon["["Prop: SaleRibbon
(2 consumers)"]:::multiConsumer
  prop_productpagecontent["["Prop: ProductPageContent
(2 consumers)"]:::multiConsumer
  prop_productquickview["["Prop: ProductQuickView
(3 consumers)"]:::multiConsumer
  prop_productbadges["["Prop: ProductBadges
(2 consumers)"]:::multiConsumer
  prop_productlist["["Prop: ProductList
(3 consumers)"]:::multiConsumer
  prop_productcard["["Prop: ProductCard
(2 consumers)"]:::multiConsumer
  prop_swipetoaction["["Prop: SwipeToAction
(4 consumers)"]:::multiConsumer
  prop_sharemodal["["Prop: ShareModal
(3 consumers)"]:::multiConsumer
  prop_generatemetadata["["Prop: generateMetadata
(4 consumers)"]:::multiConsumer
  prop_userauthmodal["["Prop: UserAuthModal
(4 consumers)"]:::multiConsumer
  prop_ricloseline["["Prop: RiCloseLine
(1 consumers)"]:::multiConsumer
  prop_helpmodal["["Prop: HelpModal
(2 consumers)"]:::multiConsumer
  prop_addressmodal["["Prop: AddressModal
(3 consumers)"]:::multiConsumer
  prop_shineeffect["["Prop: ShineEffect
(1 consumers)"]:::multiConsumer
  prop_notemodal["["Prop: NoteModal
(2 consumers)"]:::multiConsumer
  prop_categorynavigation["["Prop: CategoryNavigation
(2 consumers)"]:::multiConsumer
  prop_productsection["["Prop: ProductSection
(2 consumers)"]:::multiConsumer
  prop_productcardwrapper["["Prop: ProductCardWrapper
(2 consumers)"]:::multiConsumer
  prop_checkout["["Prop: Checkout
(2 consumers)"]:::multiConsumer
  prop_checkoutmodal["["Prop: CheckoutModal
(2 consumers)"]:::multiConsumer
  prop_formatcacheage["["Prop: formatCacheAge
(3 consumers)"]:::multiConsumer
  prop_formatcachetime["["Prop: formatCacheTime
(2 consumers)"]:::multiConsumer
  prop_formathumantime["["Prop: formatHumanTime
(2 consumers)"]:::multiConsumer
  prop_get["["Prop: GET
(9 consumers)"]:::multiConsumer
  prop_post["["Prop: POST
(6 consumers)"]:::multiConsumer
  prop_put["["Prop: PUT
(3 consumers)"]:::multiConsumer
  end

  %% Import relationships
  middleware --> middleware
  routing --> middleware
  next --> next_config
  plugin --> next_config
  tailwindcss --> tailwind_config
  react --> authcontext
  useuser --> authcontext
  logger --> authcontext
  react --> cartcontext
  global --> cartcontext
  hooks --> cartcontext
  confirmationmodal --> cartcontext
  emptycartnotification --> cartcontext
  navigation --> cartcontext
  dealscontext --> cartcontext
  deal --> cartcontext
  react --> datacontext
  navigation --> datacontext
  global --> datacontext
  loading --> datacontext
  logger --> datacontext
  hooks --> datacontext
  error --> datacontext
  react --> dealscontext
  deal --> dealscontext
  server --> request
  routing --> request
  routing --> routing
  navigation --> routing
  react --> backgroundfetcher
  navigation --> backgroundfetcher
  swr --> backgroundfetcher
  global --> backgroundfetcher
  fetchers --> backgroundfetcher
  logger --> backgroundfetcher
  providers --> backgroundfetcher
  constants --> backgroundfetcher
  react --> browseviewwrapper
  browseviewmain --> browseviewwrapper
  providers --> browseviewwrapper
  react --> categoryselectionmain
  image --> categoryselectionmain
  navigation --> categoryselectionmain
  datacontext --> categoryselectionmain
  react --> conditionalhero
  navigation --> conditionalhero
  hero --> conditionalhero
  global --> conditionalhero
  react --> header
  navigation --> header
  lucide_react --> header
  menu --> header
  productsearchmanager --> header
  react --> headersearch
  navigation --> headersearch
  next_intl --> headersearch
  global --> headersearch
  index --> headersearch
  image --> headersearch
  react --> hero
  image --> hero
  link --> hero
  global --> hero
  navigation --> hero
  react --> productbadges
  image --> productbadges
  global --> productbadges
  navigation --> productbadges
  react --> productbreadcrumb
  link --> productbreadcrumb
  navigation --> productbreadcrumb
  react --> productcard
  image --> productcard
  cartcontext --> productcard
  global --> productcard
  navigation --> productcard
  saleribbon --> productcard
  he --> productcard
  ar --> productcard
  react --> productpagecontent
  singleproductview --> productpagecontent
  react --> productquickview
  image --> productquickview
  cartcontext --> productquickview
  navigation --> productquickview
  global --> productquickview
  index --> productquickview
  productbadges --> productquickview
  react --> productslistmain
  productcard --> productslistmain
  global --> productslistmain
  index --> productslistmain
  datacontext --> productslistmain
  productquickview --> productslistmain
  lucide_react --> productslistmain
  usedragscroll --> productslistmain
  authcontext --> productslistmain
  navigation --> productslistmain
  useorders --> productslistmain
  react --> saleribbon
  navigation --> saleribbon
  global --> saleribbon
  react --> shoppingcart
  image --> shoppingcart
  link --> shoppingcart
  cartcontext --> shoppingcart
  swipetoaction --> shoppingcart
  navigation --> shoppingcart
  react --> singleproductview
  image --> singleproductview
  cartcontext --> singleproductview
  navigation --> singleproductview
  global --> singleproductview
  next_intl --> singleproductview
  index --> singleproductview
  productbadges --> singleproductview
  sharemodal --> singleproductview
  saleribbon --> singleproductview
  useproduct --> singleproductview
  loading --> singleproductview
  productbreadcrumb --> singleproductview
  react --> userdashboard
  navigation --> userdashboard
  next_intl --> userdashboard
  userprofile --> userdashboard
  authcontext --> userdashboard
  logger --> userdashboard
  global --> siteconfig
  messages --> orderconfirmation
  next_intl --> layout
  server --> layout
  navigation --> layout
  routing --> layout
  globals --> layout
  cartcontext --> layout
  authcontext --> layout
  cartbutton --> layout
  heromessages --> layout
  react --> layout
  datacontext --> layout
  cartstatepersistencehandler --> layout
  script --> layout
  next --> layout
  siteconfig --> layout
  logger --> layout
  providers --> layout
  header --> layout
  conditionalhero --> layout
  devtools --> layout
  dealsdebugpanel --> layout
  react --> not_found
  navigation --> not_found
  categoryselectionmain --> page
  productslistmain --> page
  next_intl --> page
  server --> page
  backgroundfetcher --> page
  next --> page
  siteconfig --> page
  routing --> page
  react --> providers
  swr --> providers
  logger --> providers
  constants --> providers
  dealscontext --> providers
  react --> orderhistory
  next_intl --> orderhistory
  navigation --> orderhistory
  cartcontext --> orderhistory
  checkout --> orderhistory
  useorders --> orderhistory
  react --> personalinfo
  navigation --> personalinfo
  next_intl --> personalinfo
  user --> personalinfo
  react --> authbutton
  ri --> authbutton
  userauthmodal --> authbutton
  authcontext --> authbutton
  react --> userauthmodal
  ri --> userauthmodal
  navigation --> userauthmodal
  global --> userauthmodal
  react --> confirmationmodal
  global --> confirmationmodal
  swipetoaction --> confirmationmodal
  navigation --> confirmationmodal
  react --> emptycartnotification
  global --> emptycartnotification
  next_intl --> emptycartnotification
  react --> helpmodal
  react --> menu
  image --> menu
  link --> menu
  lucide_react --> menu
  navigation --> menu
  addressmodal --> menu
  useuser --> menu
  helpmodal --> menu
  userauthmodal --> menu
  useflasheffect --> menu
  sharemodal --> menu
  react --> productsearchmanager
  image --> productsearchmanager
  navigation --> productsearchmanager
  datacontext --> productsearchmanager
  global --> productsearchmanager
  searchresults --> productsearchmanager
  react --> searchresults
  image --> searchresults
  global --> searchresults
  index --> searchresults
  cartcontext --> searchresults
  useflasheffect --> searchresults
  react --> sharemodal
  react --> shineeffect
  global --> shineeffect
  react --> swipetoaction
  global --> swipetoaction
  navigation --> swipetoaction
  he --> swipetoaction
  ar --> swipetoaction
  shineeffect --> swipetoaction
  react --> notemodal
  global --> notemodal
  react --> browseviewmain
  navigation --> browseviewmain
  global --> browseviewmain
  hooks --> browseviewmain
  categorynavigationbar --> browseviewmain
  productsection --> browseviewmain
  productquickview --> browseviewmain
  react --> categorynavigationbar
  global --> categorynavigationbar
  navigation --> categorynavigationbar
  react --> productcardwrapper
  productcard --> productcardwrapper
  global --> productcardwrapper
  index --> productcardwrapper
  react --> productsection
  global --> productsection
  productcardwrapper --> productsection
  react_intersection_observer --> productsection
  react --> dealsdebugpanel
  dealscontext --> dealsdebugpanel
  cartcontext --> dealsdebugpanel
  deal --> dealsdebugpanel
  react --> checkout
  navigation --> checkout
  cartcontext --> checkout
  checkout --> checkout
  image --> checkout
  link --> checkout
  useuser --> checkout
  react --> checkoutmodal
  navigation --> checkoutmodal
  navigation --> checkoutmodal
  checkout --> checkoutmodal
  checkout --> checkoutmodal
  react --> addressmodal
  user --> addressmodal
  cartcontext --> cartbutton
  navigation --> cartbutton
  react --> cartbutton
  navigation --> cartbutton
  swipetoaction --> cartbutton
  checkoutmodal --> cartbutton
  userauthmodal --> cartbutton
  useuser --> cartbutton
  user_api --> cartbutton
  he --> cartbutton
  ar --> cartbutton
  react --> cartcheck
  image --> cartcheck
  link --> cartcheck
  cartcontext --> cartcheck
  swipetoaction --> cartcheck
  navigation --> cartcheck
  userauthmodal --> cartcheck
  addressmodal --> cartcheck
  useuser --> cartcheck
  notemodal --> cartcheck
  cartcontext --> cartstatepersistencehandler
  navigation --> cartstatepersistencehandler
  react --> cartstatepersistencehandler
  react --> emptycartnotification
  global --> emptycartnotification
  navigation --> emptycartnotification
  react --> devtools
  datacontext --> devtools
  swr --> swr
  cache --> swr
  swr --> createentityhook
  global --> createentityhook
  fetchers --> createentityhook
  logger --> createentityhook
  constants --> createentityhook
  react --> usecartdiscounts
  cartitem --> usecartdiscounts
  deal --> usecartdiscounts
  global --> usecategories
  fetchers --> usecategories
  createentityhook --> usecategories
  react --> usedealsdebug
  dealscontext --> usedealsdebug
  react --> usedragscroll
  react --> useflasheffect
  react --> usehydration
  swr --> useorders
  fetchers --> useorders
  constants --> useorders
  global --> useorders
  swr --> useproduct
  global --> useproduct
  fetchers --> useproduct
  constants --> useproduct
  logger --> useproduct
  global --> useproducts
  fetchers --> useproducts
  createentityhook --> useproducts
  swr --> useuser
  global --> useuser
  fetchers --> useuser
  constants --> useuser
  logger --> useuser
  deal --> cartitem
  global --> cartitem
  global --> auth
  global --> ui
  logger --> cache_diagnostic
  cache_metrics --> cache_diagnostic
  cache --> index
  product --> index
  browseviewwrapper --> page
  react --> page
  loading --> page
  next --> page
  server --> page
  siteconfig --> page
  routing --> page
  backgroundfetcher --> page
  react --> page
  cartcheck --> page
  productslistmain --> page
  next_intl --> page
  react --> page
  navigation --> page
  link --> page
  orderconfirmation --> page
  react --> page
  navigation --> page
  userdashboard --> page
  next_intl --> page
  server --> route
  cache_metrics --> route
  redis --> route
  logger --> route
  os --> route
  server --> route
  wp_auth --> route
  index --> route
  server --> route
  wp_auth --> route
  logger --> fetchers
  global --> fetchers
  global --> index
  constants --> index
  swr --> swr_config
  constants --> swr_config
  global --> user_api
  logger --> user_api
  wp_auth --> wp_api
  global --> wp_api
  logger --> wp_api
  server --> auth
  server --> index
  buffer --> wp_auth
  constants --> index
  ioredis --> redis
  logger --> redis
  cache --> redis
  memory_cache --> redis
  cache_diagnostic --> redis
  global --> wp_cache
  index --> wp_cache
  constants --> wp_cache
  redis --> wp_cache
  logger --> wp_cache
  wp_api --> wp_cache
  route --> wp_cache
  global --> index
  logger --> cache_metrics
  perf_hooks --> cache_metrics
  global --> index
  deal --> index
  react --> page
  server --> page
  next --> page
  productpagecontent --> page
  siteconfig --> page
  wp_cache --> page
  global --> page
  server --> route
  global --> route
  wp_cache --> route
  index --> route
  constants --> route
  server --> route
  global --> route
  wp_cache --> route
  index --> route
  constants --> route
  server --> route
  wp_cache --> route
  redis --> route
  server --> route
  cache_metrics --> route
  logger --> route
  server --> route
  wp_auth --> route
  server --> route
  wp_auth --> route
  index --> route
  server --> route
  wp_auth --> route
  server --> route
  auth --> route
  server --> route
  wp_auth --> route
  auth --> route
  constants --> route
  redis --> route
  logger --> route
  cache_keys --> route
  cache_diagnostic --> route
  uuid --> route
  server --> route
  wp_auth --> route
  server --> route
  wp_auth --> route
  server --> route
  global --> route
  wp_cache --> route
  index --> route
  constants --> route
  deals --> route
  server --> route
  cache_metrics --> route
  logger --> route
  server --> route
  wp_auth --> route
  %% Context relationships
  authcontext -->|creates| unnamedcontext
  cartcontext -->|creates| unnamedcontext
  datacontext -->|creates| unnamedcontext
  dealscontext -->|creates| unnamedcontext
  %% Props relationships
  test_cache -->|props| parsecacheheaders
  test_cache -->|props| formattime
  test_cache -->|props| fetchendpoint
  cartcontext -->|props| confirmationmodal
  cartcontext -->|props| emptycartnotification
  datacontext -->|props| dataprovider
  datacontext -->|props| error
  categoryselectionmain -->|props| image
  conditionalhero -->|props| conditionalhero
  conditionalhero -->|props| hero
  header -->|props| chevronleft
  header -->|props| productsearchmanager
  header -->|props| menu
  hero -->|props| link
  productcard -->|props| getmessages
  productcard -->|props| saleribbon
  productpagecontent -->|props| productpagecontent
  productpagecontent -->|props| singleproductview
  productquickview -->|props| productquickview
  productquickview -->|props| productbadges
  productslistmain -->|props| productlist
  productslistmain -->|props| getrandomproducts
  productslistmain -->|props| productcard
  productslistmain -->|props| chevronright
  shoppingcart -->|props| swipetoaction
  singleproductview -->|props| productbreadcrumb
  singleproductview -->|props| sharemodal
  userdashboard -->|props| personalinfo
  userdashboard -->|props| orderhistory
  layout -->|props| generatemetadata
  layout -->|props| localelayout
  layout -->|props| script
  layout -->|props| nextintlclientprovider
  providers -->|props| swrprovider
  providers -->|props| swrconfig
  providers -->|props| providers
  authbutton -->|props| riuserline
  authbutton -->|props| userauthmodal
  userauthmodal -->|props| ricloseline
  userauthmodal -->|props| riuser3line
  userauthmodal -->|props| riarrowleftsline
  userauthmodal -->|props| rilogoutboxrline
  helpmodal -->|props| helpmodal
  menu -->|props| addressmodal
  productsearchmanager -->|props| searchresults
  swipetoaction -->|props| shineeffect
  notemodal -->|props| notemodal
  browseviewmain -->|props| categorynavigation
  browseviewmain -->|props| productsection
  productcardwrapper -->|props| productcardwrapper
  checkout -->|props| checkout
  checkoutmodal -->|props| checkoutmodal
  createentityhook -->|props| createentityhook
  usedragscroll -->|props| usedragscroll
  useflasheffect -->|props| useflasheffect
  useproduct -->|props| useproduct
  cache_diagnostic -->|props| logcache
  cache_diagnostic -->|props| getlayersymbol
  cache_diagnostic -->|props| getactiontext
  formatting -->|props| formatcacheage
  formatting -->|props| formatcachetime
  formatting -->|props| formathumantime
  formatting -->|props| formatprice
  page -->|props| suspense
  route -->|props| get
  route -->|props| post
  route -->|props| put
  fetchers -->|props| apifetcher
  fetchers -->|props| userfetcher
  fetchers -->|props| productsfetcher
  fetchers -->|props| productfetcher
  fetchers -->|props| categoriesfetcher
  fetchers -->|props| ordersfetcher
  user_api -->|props| iscachevalid
  user_api -->|props| fetchcurrentuser
  wp_api -->|props| wpapifetch
  auth -->|props| isauthenticated
  auth -->|props| setauthheaders
  auth -->|props| clearauthcookies
  index -->|props| safecacheage
  index -->|props| calculatecachepercent
  index -->|props| getcachediagnostics
  index -->|props| addcacheheaders
  index -->|props| adddevelopmentcacheheaders
  redis -->|props| getfromcache
  redis -->|props| setincache
  redis -->|props| deletefromcache
  redis -->|props| getcategorycachekey
  redis -->|props| getproductcachekey
  redis -->|props| getusercachekey
  wp_cache -->|props| transformcategories
  wp_cache -->|props| getcategories
  wp_cache -->|props| getproducts
  wp_cache -->|props| paginateproducts
  wp_cache -->|props| pretransformproducts
  cache_metrics -->|props| setmetricsenabled
  cache_metrics -->|props| trackcacheoperation
  cache_metrics -->|props| maptoobject
  cache_metrics -->|props| withcachemetrics
  page -->|props| page
  route -->|props| delete
  prop_error -.->|used by| datacontext
  prop_error -.->|used by| error
  prop_image -.->|used by| categoryselectionmain
  prop_image -.->|used by| headersearch
  prop_image -.->|used by| hero
  prop_image -.->|used by| productbadges
  prop_image -.->|used by| productcard
  prop_image -.->|used by| productquickview
  prop_image -.->|used by| shoppingcart
  prop_image -.->|used by| singleproductview
  prop_image -.->|used by| menu
  prop_image -.->|used by| productsearchmanager
  prop_image -.->|used by| searchresults
  prop_image -.->|used by| checkout
  prop_image -.->|used by| cartcheck
  prop_conditionalhero -.->|used by| conditionalhero
  prop_conditionalhero -.->|used by| layout
  prop_hero -.->|used by| conditionalhero
  prop_hero -.->|used by| hero
  prop_chevronleft -.->|used by| header
  prop_chevronleft -.->|used by| productslistmain
  prop_chevronleft -.->|used by| menu
  prop_productsearchmanager -.->|used by| header
  prop_productsearchmanager -.->|used by| productsearchmanager
  prop_menu -.->|used by| header
  prop_menu -.->|used by| menu
  prop_link -.->|used by| hero
  prop_link -.->|used by| productbreadcrumb
  prop_link -.->|used by| shoppingcart
  prop_link -.->|used by| menu
  prop_link -.->|used by| checkout
  prop_link -.->|used by| cartcheck
  prop_link -.->|used by| page
  prop_saleribbon -.->|used by| productcard
  prop_saleribbon -.->|used by| singleproductview
  prop_productpagecontent -.->|used by| productpagecontent
  prop_productpagecontent -.->|used by| page
  prop_productquickview -.->|used by| productquickview
  prop_productquickview -.->|used by| productslistmain
  prop_productquickview -.->|used by| browseviewmain
  prop_productbadges -.->|used by| productquickview
  prop_productbadges -.->|used by| singleproductview
  prop_productlist -.->|used by| productslistmain
  prop_productlist -.->|used by| page
  prop_productlist -.->|used by| page
  prop_productcard -.->|used by| productslistmain
  prop_productcard -.->|used by| productcardwrapper
  prop_swipetoaction -.->|used by| shoppingcart
  prop_swipetoaction -.->|used by| confirmationmodal
  prop_swipetoaction -.->|used by| cartbutton
  prop_swipetoaction -.->|used by| cartcheck
  prop_sharemodal -.->|used by| singleproductview
  prop_sharemodal -.->|used by| menu
  prop_sharemodal -.->|used by| sharemodal
  prop_generatemetadata -.->|used by| layout
  prop_generatemetadata -.->|used by| page
  prop_generatemetadata -.->|used by| page
  prop_generatemetadata -.->|used by| page
  prop_userauthmodal -.->|used by| authbutton
  prop_userauthmodal -.->|used by| menu
  prop_userauthmodal -.->|used by| cartbutton
  prop_userauthmodal -.->|used by| cartcheck
  prop_ricloseline -.->|used by| userauthmodal
  prop_helpmodal -.->|used by| helpmodal
  prop_helpmodal -.->|used by| menu
  prop_addressmodal -.->|used by| menu
  prop_addressmodal -.->|used by| addressmodal
  prop_addressmodal -.->|used by| cartcheck
  prop_shineeffect -.->|used by| swipetoaction
  prop_notemodal -.->|used by| notemodal
  prop_notemodal -.->|used by| cartcheck
  prop_categorynavigation -.->|used by| browseviewmain
  prop_categorynavigation -.->|used by| categorynavigationbar
  prop_productsection -.->|used by| browseviewmain
  prop_productsection -.->|used by| productsection
  prop_productcardwrapper -.->|used by| productcardwrapper
  prop_productcardwrapper -.->|used by| productsection
  prop_checkout -.->|used by| checkout
  prop_checkout -.->|used by| checkoutmodal
  prop_checkoutmodal -.->|used by| checkoutmodal
  prop_checkoutmodal -.->|used by| cartbutton
  prop_formatcacheage -.->|used by| formatting
  prop_formatcacheage -.->|used by| index
  prop_formatcacheage -.->|used by| index
  prop_formatcachetime -.->|used by| formatting
  prop_formatcachetime -.->|used by| index
  prop_formathumantime -.->|used by| formatting
  prop_formathumantime -.->|used by| index
  prop_get -.->|used by| route
  prop_get -.->|used by| route
  prop_get -.->|used by| route
  prop_get -.->|used by| route
  prop_get -.->|used by| route
  prop_get -.->|used by| route
  prop_get -.->|used by| route
  prop_get -.->|used by| route
  prop_get -.->|used by| route
  prop_post -.->|used by| route
  prop_post -.->|used by| route
  prop_post -.->|used by| route
  prop_post -.->|used by| route
  prop_post -.->|used by| route
  prop_post -.->|used by| route
  prop_put -.->|used by| route
  prop_put -.->|used by| route
  prop_put -.->|used by| route
  %% Object relationships
  %% Array relationships
  %% Map operations
  items -->|mapped in| cartcontext
  prevcart -->|mapped in| cartcontext
  prev -->|mapped in| cartcontext
  cartitems -->|mapped in| cartcontext
  cartitems -->|mapped in| shoppingcart
  cartitems -->|mapped in| dealsdebugpanel
  cartitems -->|mapped in| checkout
  cartitems -->|mapped in| checkout
  cartitems -->|mapped in| cartcheck
  dealsarray -->|mapped in| dealscontext
  filteredcategories -->|mapped in| categoryselectionmain
  dietaryflags -->|mapped in| headersearch
  dietaryflags -->|mapped in| productbadges
  searchresults -->|mapped in| headersearch
  displayproducts -->|mapped in| productslistmain
  containslist -->|mapped in| singleproductview
  maycontainlist -->|mapped in| singleproductview
  orders -->|mapped in| orderhistory
  results -->|mapped in| searchresults
  sortedmaincategories -->|mapped in| categorynavigationbar
  visibleproducts -->|mapped in| productsection
  itemswiththisdeal -->|mapped in| dealsdebugpanel
  deals -->|mapped in| dealsdebugpanel
  alldealstoshow -->|mapped in| dealsdebugpanel
  allproducts -->|mapped in| wp_api
  existinglineitems -->|mapped in| route
  line_items -->|mapped in| route
`;
    
    // Setup PNG export
    document.getElementById('export-png').addEventListener('click', () => {
      const svg = document.querySelector('#graph svg');
      if (svg) {
        // Create a canvas element to convert SVG to PNG
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        
        // Create an image from the SVG
        const image = new Image();
        const svgData = new XMLSerializer().serializeToString(svg);
        const svgBlob = new Blob([svgData], {type: 'image/svg+xml;charset=utf-8'});
        const url = URL.createObjectURL(svgBlob);
        
        image.onload = () => {
          // Set canvas dimensions to match the SVG
          canvas.width = image.width;
          canvas.height = image.height;
          
          // Draw the image to the canvas
          ctx.drawImage(image, 0, 0);
          
          // Convert to PNG and trigger download
          const pngUrl = canvas.toDataURL('image/png');
          const a = document.createElement('a');
          a.href = pngUrl;
          a.download = 'dependency-map.png';
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
          URL.revokeObjectURL(url);
        };
        
        image.src = url;
      }
    });
    
    // Setup fullscreen
    document.getElementById('fullscreen').addEventListener('click', () => {
      const graphContainer = document.getElementById('flowchart-tab');
      if (graphContainer.requestFullscreen) {
        graphContainer.requestFullscreen();
      } else if (graphContainer.mozRequestFullScreen) {
        graphContainer.mozRequestFullScreen();
      } else if (graphContainer.webkitRequestFullscreen) {
        graphContainer.webkitRequestFullscreen();
      } else if (graphContainer.msRequestFullscreen) {
        graphContainer.msRequestFullscreen();
      }
    });
  
  </script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f5f5f5;
    }
    
    .controls {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 100;
      background: rgba(255, 255, 255, 0.8);
      padding: 10px;
      border-radius: 5px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }
    
    .controls button {
      padding: 5px 10px;
      margin: 0 5px;
      cursor: pointer;
      background: #4a6ee0;
      color: white;
      border: none;
      border-radius: 3px;
    }
    
    #graph {
      overflow: auto;
      margin-top: 20px;
      background-color: white;
      padding: 20px;
      border-radius: 5px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      min-height: 400px;
    }
    
    #graph svg {
      transform-origin: top left;
      transition: transform 0.2s;
      width: 100%;
    }
    
    .mermaid {
      font-size: 16px;
    }
    
    h1 {
      color: #333;
      margin-bottom: 20px;
    }
    
    .legend {
      margin: 10px 0;
      padding: 10px;
      background: #fff;
      border-radius: 5px;
      box-shadow: 0 1px 5px rgba(0,0,0,0.1);
    }
  
    #graph svg {
      width: auto !important;
      height: auto !important;
      max-width: 100%;
    }
    
    .svg-pan-zoom-control {
      display: block;
    }
    
    /* Tabs for switching between PNG and text views */
    .tabs {
      display: flex;
      margin-bottom: 20px;
    }
    
    .tab {
      padding: 10px 20px;
      cursor: pointer;
      background: #f0f0f0;
      border: 1px solid #ddd;
      border-bottom: none;
      margin-right: 5px;
      border-radius: 5px 5px 0 0;
    }
    
    .tab.active {
      background: white;
      font-weight: bold;
    }
    
    .tab-content {
      display: none;
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 0 5px 5px 5px;
      background: white;
    }
    
    .tab-content.active {
      display: block;
    }
    
    #text-flow {
      font-family: monospace;
      white-space: pre;
      overflow-x: auto;
      line-height: 1.5;
      padding: 15px;
      background: #f5f5f5;
      border-radius: 5px;
      max-height: 500px;
      overflow-y: auto;
    }
    
    .flowchart-container {
      position: relative;
      margin-top: 20px;
    }
    
    /* Styling for the PNG export controls */
    .export-controls {
      margin-top: 20px;
      display: flex;
      gap: 10px;
    }
    
    .export-controls button {
      padding: 8px 15px;
      background: #4a6ee0;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    
    /* Legend styling */
    .legend {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 20px;
    }
    
    .legend-item {
      display: flex;
      align-items: center;
      gap: 5px;
      padding: 5px 10px;
      border-radius: 4px;
      font-size: 14px;
    }
    
    .legend-color {
      width: 20px;
      height: 20px;
      border-radius: 4px;
    }
    
    .component-color { background-color: #e1f5fe; border: 1px solid #0288d1; }
    .context-color { background-color: #fff9c4; border: 1px solid #fbc02d; }
    .object-color { background-color: #e8f5e9; border: 1px solid #43a047; }
    .array-color { background-color: #f3e5f5; border: 1px solid #8e24aa; }
    .map-color { background-color: #ffebee; border: 1px solid #e53935; }
    .multi-color { background-color: #ede7f6; border: 1px solid #673ab7; border-width: 3px; }
  
  </style>
</head>
<body>
  <h1>Himdell Dependency Map</h1>
  
  <div class="legend">
    <p>This diagram shows the dependencies between files in your project.</p>
  </div>
  
  <!-- Error container -->
  <div id="error-container" style="color: red; margin-bottom: 10px;"></div>
  
  <!-- Controls for zooming -->
  <div class="controls">
    <button id="zoom-in">+</button>
    <button id="zoom-out">-</button>
    <button id="reset">Reset</button>
  </div>
  
  <div id="graph"></div>
  
  <script>
    // Initialize mermaid with better settings
    mermaid.initialize({ 
      startOnLoad: true,
      theme: 'default',
      securityLevel: 'loose',
      flowchart: {
        htmlLabels: true,
        curve: 'basis'
      }
    });
    
    try {
      // Render the mermaid diagram
      const mermaidCode = `flowchart LR
  %% Style definitions
  classDef component fill:#e1f5fe,stroke:#0288d1,color:#01579b
  classDef context fill:#fff9c4,stroke:#fbc02d,color:#f57f17
  classDef object fill:#e8f5e9,stroke:#43a047,color:#1b5e20
  classDef array fill:#f3e5f5,stroke:#8e24aa,color:#4a148c
  classDef map fill:#ffebee,stroke:#e53935,color:#b71c1c
  classDef multiConsumer fill:#ede7f6,stroke:#673ab7,color:#311b92,stroke-width:3px

  subgraph Components
  authcontext["Component: " + "["AuthContext"]:::component
  cartcontext["Component: " + "["CartContext"]:::component
  datacontext["Component: " + "["DataContext"]:::component
  dealscontext["Component: " + "["DealsContext"]:::component
  backgroundfetcher["Component: " + "["BackgroundFetcher"]:::component
  browseviewwrapper["Component: " + "["BrowseViewWrapper"]:::component
  categoryselectionmain["Component: " + "["CategorySelectionMain"]:::component
  conditionalhero["Component: " + "["ConditionalHero"]:::component
  header["Component: " + "["Header"]:::component
  headersearch["Component: " + "["HeaderSearch"]:::component
  hero["Component: " + "["Hero"]:::component
  productbadges["Component: " + "["ProductBadges"]:::component
  productbreadcrumb["Component: " + "["ProductBreadcrumb"]:::component
  productcard["Component: " + "["ProductCard"]:::component
  productpagecontent["Component: " + "["ProductPageContent"]:::component
  productquickview["Component: " + "["ProductQuickView"]:::component
  productslistmain["Component: " + "["ProductsListMain"]:::component
  saleribbon["Component: " + "["SaleRibbon"]:::component
  shoppingcart["Component: " + "["ShoppingCart"]:::component
  singleproductview["Component: " + "["SingleProductView"]:::component
  userdashboard["Component: " + "["UserDashboard"]:::component
  layout["Component: " + "["layout"]:::component
  not_found["Component: " + "["not-found"]:::component
  page["Component: " + "["page"]:::component
  providers["Component: " + "["providers"]:::component
  orderhistory["Component: " + "["OrderHistory"]:::component
  personalinfo["Component: " + "["PersonalInfo"]:::component
  authbutton["Component: " + "["AuthButton"]:::component
  userauthmodal["Component: " + "["UserAuthModal"]:::component
  confirmationmodal["Component: " + "["ConfirmationModal"]:::component
  emptycartnotification["Component: " + "["EmptyCartNotification"]:::component
  helpmodal["Component: " + "["HelpModal"]:::component
  menu["Component: " + "["Menu"]:::component
  productsearchmanager["Component: " + "["ProductSearchManager"]:::component
  searchresults["Component: " + "["SearchResults"]:::component
  sharemodal["Component: " + "["ShareModal"]:::component
  shineeffect["Component: " + "["ShineEffect"]:::component
  swipetoaction["Component: " + "["SwipeToAction"]:::component
  notemodal["Component: " + "["noteModal"]:::component
  browseviewmain["Component: " + "["BrowseViewMain"]:::component
  categorynavigationbar["Component: " + "["CategoryNavigationBar"]:::component
  productcardwrapper["Component: " + "["ProductCardWrapper"]:::component
  productsection["Component: " + "["ProductSection"]:::component
  dealsdebugpanel["Component: " + "["DealsDebugPanel"]:::component
  checkout["Component: " + "["Checkout"]:::component
  checkoutmodal["Component: " + "["CheckoutModal"]:::component
  addressmodal["Component: " + "["AddressModal"]:::component
  cartbutton["Component: " + "["CartButton"]:::component
  cartcheck["Component: " + "["CartCheck"]:::component
  cartstatepersistencehandler["Component: " + "["CartStatePersistenceHandler"]:::component
  devtools["Component: " + "["DevTools"]:::component
  end

  subgraph Contexts
  unnamedcontext["["Context: UnnamedContext
(0 consumers)"]:::context
  end

  subgraph MultiConsumedProps
  prop_error["["Prop: Error
(2 consumers)"]:::multiConsumer
  prop_image["["Prop: Image
(13 consumers)"]:::multiConsumer
  prop_conditionalhero["["Prop: ConditionalHero
(2 consumers)"]:::multiConsumer
  prop_hero["["Prop: Hero
(2 consumers)"]:::multiConsumer
  prop_chevronleft["["Prop: ChevronLeft
(3 consumers)"]:::multiConsumer
  prop_productsearchmanager["["Prop: ProductSearchManager
(2 consumers)"]:::multiConsumer
  prop_menu["["Prop: Menu
(2 consumers)"]:::multiConsumer
  prop_link["["Prop: Link
(7 consumers)"]:::multiConsumer
  prop_saleribbon["["Prop: SaleRibbon
(2 consumers)"]:::multiConsumer
  prop_productpagecontent["["Prop: ProductPageContent
(2 consumers)"]:::multiConsumer
  prop_productquickview["["Prop: ProductQuickView
(3 consumers)"]:::multiConsumer
  prop_productbadges["["Prop: ProductBadges
(2 consumers)"]:::multiConsumer
  prop_productlist["["Prop: ProductList
(3 consumers)"]:::multiConsumer
  prop_productcard["["Prop: ProductCard
(2 consumers)"]:::multiConsumer
  prop_swipetoaction["["Prop: SwipeToAction
(4 consumers)"]:::multiConsumer
  prop_sharemodal["["Prop: ShareModal
(3 consumers)"]:::multiConsumer
  prop_generatemetadata["["Prop: generateMetadata
(4 consumers)"]:::multiConsumer
  prop_userauthmodal["["Prop: UserAuthModal
(4 consumers)"]:::multiConsumer
  prop_ricloseline["["Prop: RiCloseLine
(1 consumers)"]:::multiConsumer
  prop_helpmodal["["Prop: HelpModal
(2 consumers)"]:::multiConsumer
  prop_addressmodal["["Prop: AddressModal
(3 consumers)"]:::multiConsumer
  prop_shineeffect["["Prop: ShineEffect
(1 consumers)"]:::multiConsumer
  prop_notemodal["["Prop: NoteModal
(2 consumers)"]:::multiConsumer
  prop_categorynavigation["["Prop: CategoryNavigation
(2 consumers)"]:::multiConsumer
  prop_productsection["["Prop: ProductSection
(2 consumers)"]:::multiConsumer
  prop_productcardwrapper["["Prop: ProductCardWrapper
(2 consumers)"]:::multiConsumer
  prop_checkout["["Prop: Checkout
(2 consumers)"]:::multiConsumer
  prop_checkoutmodal["["Prop: CheckoutModal
(2 consumers)"]:::multiConsumer
  prop_formatcacheage["["Prop: formatCacheAge
(3 consumers)"]:::multiConsumer
  prop_formatcachetime["["Prop: formatCacheTime
(2 consumers)"]:::multiConsumer
  prop_formathumantime["["Prop: formatHumanTime
(2 consumers)"]:::multiConsumer
  prop_get["["Prop: GET
(9 consumers)"]:::multiConsumer
  prop_post["["Prop: POST
(6 consumers)"]:::multiConsumer
  prop_put["["Prop: PUT
(3 consumers)"]:::multiConsumer
  end

  %% Import relationships
  middleware --> middleware
  routing --> middleware
  next --> next_config
  plugin --> next_config
  tailwindcss --> tailwind_config
  react --> authcontext
  useuser --> authcontext
  logger --> authcontext
  react --> cartcontext
  global --> cartcontext
  hooks --> cartcontext
  confirmationmodal --> cartcontext
  emptycartnotification --> cartcontext
  navigation --> cartcontext
  dealscontext --> cartcontext
  deal --> cartcontext
  react --> datacontext
  navigation --> datacontext
  global --> datacontext
  loading --> datacontext
  logger --> datacontext
  hooks --> datacontext
  error --> datacontext
  react --> dealscontext
  deal --> dealscontext
  server --> request
  routing --> request
  routing --> routing
  navigation --> routing
  react --> backgroundfetcher
  navigation --> backgroundfetcher
  swr --> backgroundfetcher
  global --> backgroundfetcher
  fetchers --> backgroundfetcher
  logger --> backgroundfetcher
  providers --> backgroundfetcher
  constants --> backgroundfetcher
  react --> browseviewwrapper
  browseviewmain --> browseviewwrapper
  providers --> browseviewwrapper
  react --> categoryselectionmain
  image --> categoryselectionmain
  navigation --> categoryselectionmain
  datacontext --> categoryselectionmain
  react --> conditionalhero
  navigation --> conditionalhero
  hero --> conditionalhero
  global --> conditionalhero
  react --> header
  navigation --> header
  lucide_react --> header
  menu --> header
  productsearchmanager --> header
  react --> headersearch
  navigation --> headersearch
  next_intl --> headersearch
  global --> headersearch
  index --> headersearch
  image --> headersearch
  react --> hero
  image --> hero
  link --> hero
  global --> hero
  navigation --> hero
  react --> productbadges
  image --> productbadges
  global --> productbadges
  navigation --> productbadges
  react --> productbreadcrumb
  link --> productbreadcrumb
  navigation --> productbreadcrumb
  react --> productcard
  image --> productcard
  cartcontext --> productcard
  global --> productcard
  navigation --> productcard
  saleribbon --> productcard
  he --> productcard
  ar --> productcard
  react --> productpagecontent
  singleproductview --> productpagecontent
  react --> productquickview
  image --> productquickview
  cartcontext --> productquickview
  navigation --> productquickview
  global --> productquickview
  index --> productquickview
  productbadges --> productquickview
  react --> productslistmain
  productcard --> productslistmain
  global --> productslistmain
  index --> productslistmain
  datacontext --> productslistmain
  productquickview --> productslistmain
  lucide_react --> productslistmain
  usedragscroll --> productslistmain
  authcontext --> productslistmain
  navigation --> productslistmain
  useorders --> productslistmain
  react --> saleribbon
  navigation --> saleribbon
  global --> saleribbon
  react --> shoppingcart
  image --> shoppingcart
  link --> shoppingcart
  cartcontext --> shoppingcart
  swipetoaction --> shoppingcart
  navigation --> shoppingcart
  react --> singleproductview
  image --> singleproductview
  cartcontext --> singleproductview
  navigation --> singleproductview
  global --> singleproductview
  next_intl --> singleproductview
  index --> singleproductview
  productbadges --> singleproductview
  sharemodal --> singleproductview
  saleribbon --> singleproductview
  useproduct --> singleproductview
  loading --> singleproductview
  productbreadcrumb --> singleproductview
  react --> userdashboard
  navigation --> userdashboard
  next_intl --> userdashboard
  userprofile --> userdashboard
  authcontext --> userdashboard
  logger --> userdashboard
  global --> siteconfig
  messages --> orderconfirmation
  next_intl --> layout
  server --> layout
  navigation --> layout
  routing --> layout
  globals --> layout
  cartcontext --> layout
  authcontext --> layout
  cartbutton --> layout
  heromessages --> layout
  react --> layout
  datacontext --> layout
  cartstatepersistencehandler --> layout
  script --> layout
  next --> layout
  siteconfig --> layout
  logger --> layout
  providers --> layout
  header --> layout
  conditionalhero --> layout
  devtools --> layout
  dealsdebugpanel --> layout
  react --> not_found
  navigation --> not_found
  categoryselectionmain --> page
  productslistmain --> page
  next_intl --> page
  server --> page
  backgroundfetcher --> page
  next --> page
  siteconfig --> page
  routing --> page
  react --> providers
  swr --> providers
  logger --> providers
  constants --> providers
  dealscontext --> providers
  react --> orderhistory
  next_intl --> orderhistory
  navigation --> orderhistory
  cartcontext --> orderhistory
  checkout --> orderhistory
  useorders --> orderhistory
  react --> personalinfo
  navigation --> personalinfo
  next_intl --> personalinfo
  user --> personalinfo
  react --> authbutton
  ri --> authbutton
  userauthmodal --> authbutton
  authcontext --> authbutton
  react --> userauthmodal
  ri --> userauthmodal
  navigation --> userauthmodal
  global --> userauthmodal
  react --> confirmationmodal
  global --> confirmationmodal
  swipetoaction --> confirmationmodal
  navigation --> confirmationmodal
  react --> emptycartnotification
  global --> emptycartnotification
  next_intl --> emptycartnotification
  react --> helpmodal
  react --> menu
  image --> menu
  link --> menu
  lucide_react --> menu
  navigation --> menu
  addressmodal --> menu
  useuser --> menu
  helpmodal --> menu
  userauthmodal --> menu
  useflasheffect --> menu
  sharemodal --> menu
  react --> productsearchmanager
  image --> productsearchmanager
  navigation --> productsearchmanager
  datacontext --> productsearchmanager
  global --> productsearchmanager
  searchresults --> productsearchmanager
  react --> searchresults
  image --> searchresults
  global --> searchresults
  index --> searchresults
  cartcontext --> searchresults
  useflasheffect --> searchresults
  react --> sharemodal
  react --> shineeffect
  global --> shineeffect
  react --> swipetoaction
  global --> swipetoaction
  navigation --> swipetoaction
  he --> swipetoaction
  ar --> swipetoaction
  shineeffect --> swipetoaction
  react --> notemodal
  global --> notemodal
  react --> browseviewmain
  navigation --> browseviewmain
  global --> browseviewmain
  hooks --> browseviewmain
  categorynavigationbar --> browseviewmain
  productsection --> browseviewmain
  productquickview --> browseviewmain
  react --> categorynavigationbar
  global --> categorynavigationbar
  navigation --> categorynavigationbar
  react --> productcardwrapper
  productcard --> productcardwrapper
  global --> productcardwrapper
  index --> productcardwrapper
  react --> productsection
  global --> productsection
  productcardwrapper --> productsection
  react_intersection_observer --> productsection
  react --> dealsdebugpanel
  dealscontext --> dealsdebugpanel
  cartcontext --> dealsdebugpanel
  deal --> dealsdebugpanel
  react --> checkout
  navigation --> checkout
  cartcontext --> checkout
  checkout --> checkout
  image --> checkout
  link --> checkout
  useuser --> checkout
  react --> checkoutmodal
  navigation --> checkoutmodal
  navigation --> checkoutmodal
  checkout --> checkoutmodal
  checkout --> checkoutmodal
  react --> addressmodal
  user --> addressmodal
  cartcontext --> cartbutton
  navigation --> cartbutton
  react --> cartbutton
  navigation --> cartbutton
  swipetoaction --> cartbutton
  checkoutmodal --> cartbutton
  userauthmodal --> cartbutton
  useuser --> cartbutton
  user_api --> cartbutton
  he --> cartbutton
  ar --> cartbutton
  react --> cartcheck
  image --> cartcheck
  link --> cartcheck
  cartcontext --> cartcheck
  swipetoaction --> cartcheck
  navigation --> cartcheck
  userauthmodal --> cartcheck
  addressmodal --> cartcheck
  useuser --> cartcheck
  notemodal --> cartcheck
  cartcontext --> cartstatepersistencehandler
  navigation --> cartstatepersistencehandler
  react --> cartstatepersistencehandler
  react --> emptycartnotification
  global --> emptycartnotification
  navigation --> emptycartnotification
  react --> devtools
  datacontext --> devtools
  swr --> swr
  cache --> swr
  swr --> createentityhook
  global --> createentityhook
  fetchers --> createentityhook
  logger --> createentityhook
  constants --> createentityhook
  react --> usecartdiscounts
  cartitem --> usecartdiscounts
  deal --> usecartdiscounts
  global --> usecategories
  fetchers --> usecategories
  createentityhook --> usecategories
  react --> usedealsdebug
  dealscontext --> usedealsdebug
  react --> usedragscroll
  react --> useflasheffect
  react --> usehydration
  swr --> useorders
  fetchers --> useorders
  constants --> useorders
  global --> useorders
  swr --> useproduct
  global --> useproduct
  fetchers --> useproduct
  constants --> useproduct
  logger --> useproduct
  global --> useproducts
  fetchers --> useproducts
  createentityhook --> useproducts
  swr --> useuser
  global --> useuser
  fetchers --> useuser
  constants --> useuser
  logger --> useuser
  deal --> cartitem
  global --> cartitem
  global --> auth
  global --> ui
  logger --> cache_diagnostic
  cache_metrics --> cache_diagnostic
  cache --> index
  product --> index
  browseviewwrapper --> page
  react --> page
  loading --> page
  next --> page
  server --> page
  siteconfig --> page
  routing --> page
  backgroundfetcher --> page
  react --> page
  cartcheck --> page
  productslistmain --> page
  next_intl --> page
  react --> page
  navigation --> page
  link --> page
  orderconfirmation --> page
  react --> page
  navigation --> page
  userdashboard --> page
  next_intl --> page
  server --> route
  cache_metrics --> route
  redis --> route
  logger --> route
  os --> route
  server --> route
  wp_auth --> route
  index --> route
  server --> route
  wp_auth --> route
  logger --> fetchers
  global --> fetchers
  global --> index
  constants --> index
  swr --> swr_config
  constants --> swr_config
  global --> user_api
  logger --> user_api
  wp_auth --> wp_api
  global --> wp_api
  logger --> wp_api
  server --> auth
  server --> index
  buffer --> wp_auth
  constants --> index
  ioredis --> redis
  logger --> redis
  cache --> redis
  memory_cache --> redis
  cache_diagnostic --> redis
  global --> wp_cache
  index --> wp_cache
  constants --> wp_cache
  redis --> wp_cache
  logger --> wp_cache
  wp_api --> wp_cache
  route --> wp_cache
  global --> index
  logger --> cache_metrics
  perf_hooks --> cache_metrics
  global --> index
  deal --> index
  react --> page
  server --> page
  next --> page
  productpagecontent --> page
  siteconfig --> page
  wp_cache --> page
  global --> page
  server --> route
  global --> route
  wp_cache --> route
  index --> route
  constants --> route
  server --> route
  global --> route
  wp_cache --> route
  index --> route
  constants --> route
  server --> route
  wp_cache --> route
  redis --> route
  server --> route
  cache_metrics --> route
  logger --> route
  server --> route
  wp_auth --> route
  server --> route
  wp_auth --> route
  index --> route
  server --> route
  wp_auth --> route
  server --> route
  auth --> route
  server --> route
  wp_auth --> route
  auth --> route
  constants --> route
  redis --> route
  logger --> route
  cache_keys --> route
  cache_diagnostic --> route
  uuid --> route
  server --> route
  wp_auth --> route
  server --> route
  wp_auth --> route
  server --> route
  global --> route
  wp_cache --> route
  index --> route
  constants --> route
  deals --> route
  server --> route
  cache_metrics --> route
  logger --> route
  server --> route
  wp_auth --> route
  %% Context relationships
  authcontext -->|creates| unnamedcontext
  cartcontext -->|creates| unnamedcontext
  datacontext -->|creates| unnamedcontext
  dealscontext -->|creates| unnamedcontext
  %% Props relationships
  test_cache -->|props| parsecacheheaders
  test_cache -->|props| formattime
  test_cache -->|props| fetchendpoint
  cartcontext -->|props| confirmationmodal
  cartcontext -->|props| emptycartnotification
  datacontext -->|props| dataprovider
  datacontext -->|props| error
  categoryselectionmain -->|props| image
  conditionalhero -->|props| conditionalhero
  conditionalhero -->|props| hero
  header -->|props| chevronleft
  header -->|props| productsearchmanager
  header -->|props| menu
  hero -->|props| link
  productcard -->|props| getmessages
  productcard -->|props| saleribbon
  productpagecontent -->|props| productpagecontent
  productpagecontent -->|props| singleproductview
  productquickview -->|props| productquickview
  productquickview -->|props| productbadges
  productslistmain -->|props| productlist
  productslistmain -->|props| getrandomproducts
  productslistmain -->|props| productcard
  productslistmain -->|props| chevronright
  shoppingcart -->|props| swipetoaction
  singleproductview -->|props| productbreadcrumb
  singleproductview -->|props| sharemodal
  userdashboard -->|props| personalinfo
  userdashboard -->|props| orderhistory
  layout -->|props| generatemetadata
  layout -->|props| localelayout
  layout -->|props| script
  layout -->|props| nextintlclientprovider
  providers -->|props| swrprovider
  providers -->|props| swrconfig
  providers -->|props| providers
  authbutton -->|props| riuserline
  authbutton -->|props| userauthmodal
  userauthmodal -->|props| ricloseline
  userauthmodal -->|props| riuser3line
  userauthmodal -->|props| riarrowleftsline
  userauthmodal -->|props| rilogoutboxrline
  helpmodal -->|props| helpmodal
  menu -->|props| addressmodal
  productsearchmanager -->|props| searchresults
  swipetoaction -->|props| shineeffect
  notemodal -->|props| notemodal
  browseviewmain -->|props| categorynavigation
  browseviewmain -->|props| productsection
  productcardwrapper -->|props| productcardwrapper
  checkout -->|props| checkout
  checkoutmodal -->|props| checkoutmodal
  createentityhook -->|props| createentityhook
  usedragscroll -->|props| usedragscroll
  useflasheffect -->|props| useflasheffect
  useproduct -->|props| useproduct
  cache_diagnostic -->|props| logcache
  cache_diagnostic -->|props| getlayersymbol
  cache_diagnostic -->|props| getactiontext
  formatting -->|props| formatcacheage
  formatting -->|props| formatcachetime
  formatting -->|props| formathumantime
  formatting -->|props| formatprice
  page -->|props| suspense
  route -->|props| get
  route -->|props| post
  route -->|props| put
  fetchers -->|props| apifetcher
  fetchers -->|props| userfetcher
  fetchers -->|props| productsfetcher
  fetchers -->|props| productfetcher
  fetchers -->|props| categoriesfetcher
  fetchers -->|props| ordersfetcher
  user_api -->|props| iscachevalid
  user_api -->|props| fetchcurrentuser
  wp_api -->|props| wpapifetch
  auth -->|props| isauthenticated
  auth -->|props| setauthheaders
  auth -->|props| clearauthcookies
  index -->|props| safecacheage
  index -->|props| calculatecachepercent
  index -->|props| getcachediagnostics
  index -->|props| addcacheheaders
  index -->|props| adddevelopmentcacheheaders
  redis -->|props| getfromcache
  redis -->|props| setincache
  redis -->|props| deletefromcache
  redis -->|props| getcategorycachekey
  redis -->|props| getproductcachekey
  redis -->|props| getusercachekey
  wp_cache -->|props| transformcategories
  wp_cache -->|props| getcategories
  wp_cache -->|props| getproducts
  wp_cache -->|props| paginateproducts
  wp_cache -->|props| pretransformproducts
  cache_metrics -->|props| setmetricsenabled
  cache_metrics -->|props| trackcacheoperation
  cache_metrics -->|props| maptoobject
  cache_metrics -->|props| withcachemetrics
  page -->|props| page
  route -->|props| delete
  prop_error -.->|used by| datacontext
  prop_error -.->|used by| error
  prop_image -.->|used by| categoryselectionmain
  prop_image -.->|used by| headersearch
  prop_image -.->|used by| hero
  prop_image -.->|used by| productbadges
  prop_image -.->|used by| productcard
  prop_image -.->|used by| productquickview
  prop_image -.->|used by| shoppingcart
  prop_image -.->|used by| singleproductview
  prop_image -.->|used by| menu
  prop_image -.->|used by| productsearchmanager
  prop_image -.->|used by| searchresults
  prop_image -.->|used by| checkout
  prop_image -.->|used by| cartcheck
  prop_conditionalhero -.->|used by| conditionalhero
  prop_conditionalhero -.->|used by| layout
  prop_hero -.->|used by| conditionalhero
  prop_hero -.->|used by| hero
  prop_chevronleft -.->|used by| header
  prop_chevronleft -.->|used by| productslistmain
  prop_chevronleft -.->|used by| menu
  prop_productsearchmanager -.->|used by| header
  prop_productsearchmanager -.->|used by| productsearchmanager
  prop_menu -.->|used by| header
  prop_menu -.->|used by| menu
  prop_link -.->|used by| hero
  prop_link -.->|used by| productbreadcrumb
  prop_link -.->|used by| shoppingcart
  prop_link -.->|used by| menu
  prop_link -.->|used by| checkout
  prop_link -.->|used by| cartcheck
  prop_link -.->|used by| page
  prop_saleribbon -.->|used by| productcard
  prop_saleribbon -.->|used by| singleproductview
  prop_productpagecontent -.->|used by| productpagecontent
  prop_productpagecontent -.->|used by| page
  prop_productquickview -.->|used by| productquickview
  prop_productquickview -.->|used by| productslistmain
  prop_productquickview -.->|used by| browseviewmain
  prop_productbadges -.->|used by| productquickview
  prop_productbadges -.->|used by| singleproductview
  prop_productlist -.->|used by| productslistmain
  prop_productlist -.->|used by| page
  prop_productlist -.->|used by| page
  prop_productcard -.->|used by| productslistmain
  prop_productcard -.->|used by| productcardwrapper
  prop_swipetoaction -.->|used by| shoppingcart
  prop_swipetoaction -.->|used by| confirmationmodal
  prop_swipetoaction -.->|used by| cartbutton
  prop_swipetoaction -.->|used by| cartcheck
  prop_sharemodal -.->|used by| singleproductview
  prop_sharemodal -.->|used by| menu
  prop_sharemodal -.->|used by| sharemodal
  prop_generatemetadata -.->|used by| layout
  prop_generatemetadata -.->|used by| page
  prop_generatemetadata -.->|used by| page
  prop_generatemetadata -.->|used by| page
  prop_userauthmodal -.->|used by| authbutton
  prop_userauthmodal -.->|used by| menu
  prop_userauthmodal -.->|used by| cartbutton
  prop_userauthmodal -.->|used by| cartcheck
  prop_ricloseline -.->|used by| userauthmodal
  prop_helpmodal -.->|used by| helpmodal
  prop_helpmodal -.->|used by| menu
  prop_addressmodal -.->|used by| menu
  prop_addressmodal -.->|used by| addressmodal
  prop_addressmodal -.->|used by| cartcheck
  prop_shineeffect -.->|used by| swipetoaction
  prop_notemodal -.->|used by| notemodal
  prop_notemodal -.->|used by| cartcheck
  prop_categorynavigation -.->|used by| browseviewmain
  prop_categorynavigation -.->|used by| categorynavigationbar
  prop_productsection -.->|used by| browseviewmain
  prop_productsection -.->|used by| productsection
  prop_productcardwrapper -.->|used by| productcardwrapper
  prop_productcardwrapper -.->|used by| productsection
  prop_checkout -.->|used by| checkout
  prop_checkout -.->|used by| checkoutmodal
  prop_checkoutmodal -.->|used by| checkoutmodal
  prop_checkoutmodal -.->|used by| cartbutton
  prop_formatcacheage -.->|used by| formatting
  prop_formatcacheage -.->|used by| index
  prop_formatcacheage -.->|used by| index
  prop_formatcachetime -.->|used by| formatting
  prop_formatcachetime -.->|used by| index
  prop_formathumantime -.->|used by| formatting
  prop_formathumantime -.->|used by| index
  prop_get -.->|used by| route
  prop_get -.->|used by| route
  prop_get -.->|used by| route
  prop_get -.->|used by| route
  prop_get -.->|used by| route
  prop_get -.->|used by| route
  prop_get -.->|used by| route
  prop_get -.->|used by| route
  prop_get -.->|used by| route
  prop_post -.->|used by| route
  prop_post -.->|used by| route
  prop_post -.->|used by| route
  prop_post -.->|used by| route
  prop_post -.->|used by| route
  prop_post -.->|used by| route
  prop_put -.->|used by| route
  prop_put -.->|used by| route
  prop_put -.->|used by| route
  %% Object relationships
  %% Array relationships
  %% Map operations
  items -->|mapped in| cartcontext
  prevcart -->|mapped in| cartcontext
  prev -->|mapped in| cartcontext
  cartitems -->|mapped in| cartcontext
  cartitems -->|mapped in| shoppingcart
  cartitems -->|mapped in| dealsdebugpanel
  cartitems -->|mapped in| checkout
  cartitems -->|mapped in| checkout
  cartitems -->|mapped in| cartcheck
  dealsarray -->|mapped in| dealscontext
  filteredcategories -->|mapped in| categoryselectionmain
  dietaryflags -->|mapped in| headersearch
  dietaryflags -->|mapped in| productbadges
  searchresults -->|mapped in| headersearch
  displayproducts -->|mapped in| productslistmain
  containslist -->|mapped in| singleproductview
  maycontainlist -->|mapped in| singleproductview
  orders -->|mapped in| orderhistory
  results -->|mapped in| searchresults
  sortedmaincategories -->|mapped in| categorynavigationbar
  visibleproducts -->|mapped in| productsection
  itemswiththisdeal -->|mapped in| dealsdebugpanel
  deals -->|mapped in| dealsdebugpanel
  alldealstoshow -->|mapped in| dealsdebugpanel
  allproducts -->|mapped in| wp_api
  existinglineitems -->|mapped in| route
  line_items -->|mapped in| route
`;
      mermaid.mermaidAPI.render('graph', mermaidCode, (svgCode) => {
        document.getElementById('graph').innerHTML = svgCode;
        
        // Setup zoom functionality
        const svg = document.querySelector('#graph svg');
        if (svg) {
          let zoom = 1;
          
          document.getElementById('zoom-in').addEventListener('click', () => {
            zoom += 0.1;
            svg.style.transform = `scale(${zoom})`;
          });
          
          document.getElementById('zoom-out').addEventListener('click', () => {
            if (zoom > 0.2) zoom -= 0.1;
            svg.style.transform = `scale(${zoom})`;
          });
          
          document.getElementById('reset').addEventListener('click', () => {
            zoom = 1;
            svg.style.transform = `scale(${zoom})`;
          });
        }
      });
    } catch (error) {
      document.getElementById('error-container').textContent = 'Error rendering graph: ' + error.message;
      console.error('Mermaid error:', error);
    }
  </script>
</body>
</html>